<form method="POST">
	<textarea name="content" class="form-control" rows="15">{{content}}</textarea>
	<hr>
	<a href="/" class="btn btn-default">Cancel</a>
	<button type="submit" class="btn btn-primary">Save</button>
	<button data-action="showRenameDlg" class="btn btn-default">Rename</button>
	<button data-action="delete" class="btn btn-danger">Delete</button>
</form>

<div class="modal fade" id="deleteConfirm">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Delete "{{name}}"</h4>
      </div>
      <div class="modal-body">
		<p>Are you sure you want to delete this file?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-action="confirmDelete">Delete</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="dlgRename">
	<div class="modal-dialog">
		<div class="modal-content">
			<form id="nameDialog">
			<div class="modal-header">
				<button type="button" name="name" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
				<h4 class="modal-title">Rename "{{name}}"</h4>
			</div>
			<div class="modal-body">
				New name: <input type="text" name="newName" class="form-control" pattern="[\w]+">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
					<button data-action="rename" class="btn btn-primary">OK</button>
				</div>
			</form>
		</div>
	</div>
</div>

<script>
	$(document).ready(function(){
		$('[data-action="delete"]').on('click', function(evt){
			evt.preventDefault();
			$('#deleteConfirm').modal();
		});
		$('[data-action="confirmDelete"]').on('click', function(evt){
			evt.preventDefault();
			window.location = '/delete/{{name}}';	
		});
		$('[data-action="showRenameDlg"]').on('click', function(evt){
			evt.preventDefault();
			$('#dlgRename').modal();
		});
		$('[data-action="rename"]').on('click', function(evt){
			evt.preventDefault();
			var newName = $(this).closest('.modal-dialog').find('input[name="newName"]').val();
			window.location = '/rename/{{name}}/' + newName;
		});
	});
</script>
